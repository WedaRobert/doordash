"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4073],{96214:function(a,b,c){var d=c(85893),e=c(24906),f=c(10071);c(67294);var g=function(a){var b=a.isAddressLabelEnabled,c=a.shouldShowCurrentLocationIcon,d=a.hasNoDefaultAddressShortname,e=a.addressLabelIcon;return!b||c?void 0:d?f.Icon.Types.Add:b?e:void 0},h=function(a){var b=a.accessabilityString,c=a.label,h=a.aria,i=a.onClick,j=a.shouldShowCurrentLocationIcon,k=a.isAddressLabelEnabled,l=a.hasNoDefaultAddressShortname,m=a.addressLabelIcon,n=a.hideChevronIcon,o=void 0!==n&&n;return(0,d.jsx)(e.default,{accessibilityDescribedBy:b,"aria-controls":h,"aria-haspopup":"true",isInline:!0,onClick:i,padding:e.default.Padding.None,type:e.default.Types.FlatSecondary,leadingIcon:g({isAddressLabelEnabled:k,shouldShowCurrentLocationIcon:j,hasNoDefaultAddressShortname:l,addressLabelIcon:m}),trailingIcon:k&&!o?f.Icon.Types.ChevronDown:void 0,size:k?e.default.Sizes.Small:void 0,children:(0,d.jsxs)(f.InlineChildren,{size:j&&k?f.InlineChildren.Sizes.XxxSmall:f.InlineChildren.Sizes.None,children:[j&&k&&(0,d.jsx)(f.Icon,{type:f.Icon.Types.LocationPointerFill,size:20,color:f.Icon.Colors.CurrentColor}),(0,d.jsxs)(f.InlineChildren,{size:f.InlineChildren.Sizes.None,alignItems:f.InlineChildren.Alignment.Center,children:[(0,d.jsx)(f.Text,{styles:f.Text.Styles.ButtonSmallTitle,children:c}),!k&&!o&&(0,d.jsx)(f.Icon,{type:f.Icon.Types.ChevronDown,size:f.Icon.Sizes.Small,color:f.Icon.Colors.CurrentColor,"data-testid":"AddressTextButtonChevronIcon"})]})]})})};b.Z=h},30878:function(a,b,c){c.r(b);var d=c(10253),e=c(85893),f=c(1968),g=c(67294),h=c(3532),i=c(40097),j=c(22459),k=c(95583),l=c(98571),m=c(70179),n=c(20306),o=c(55186),p=c(85194),q=c(35927),r=c(96214),s=c(96590),t=c(10090),u=c(64704),v=c(44529),w=function(a){var b,c,w,x,y=a.consumer,z=a.refetchQueries,A=a.refetchQueriesOnAddressUpdate,B=a.addressText,C=a.onAddressChange,D=a.isCurrentLocationEnabled,E=a.isCurrentLocationSelected,F=void 0!==E&&E,G=a.onClickCurrentLocation,H=a.shouldShowInfoPickerTooltip,I=(0,d.Z)(g.useState(!1),2),J=I[0],K=I[1],L=(0,m.Z)(),M=L.showSignInSignUpModal,N=L.setShowSignInSignUpModal,O=(0,i.F)(),P=(0,n.Z)().isAddressLabelEnabled,Q=(0,v.p6)(),R=g.useCallback(function(a){K(!1),null==C||C(a)},[C]),S=(0,q.F)((null==Q?void 0:Q.id)||"",R);if(!O)return null;var T=function(){R()},U=function(){var a;K(!0),(0,h.ZP)("m_homepage_tap_default_address",{delivery_address_id:(null==y?void 0:null===(a=y.defaultAddress)||void 0===a?void 0:a.id)||null})},V=function(){(0,h.ZP)("signin_modal_opened"),N(!0)};return M?(0,e.jsx)(l.Z,{setShowSignInSignUpModal:N,onClose:function(){return N(!1)}}):(0,e.jsxs)(s.Qd,{"data-testid":o.m.infoPickerMobile,children:[(0,e.jsx)(u.p,{shouldShowInfoPickerTooltip:H,children:(0,e.jsx)(r.Z,{label:(0,t.ow)({addressTextProp:B,defaultAddress:y.defaultAddress,isAddressLabelEnabled:P}),accessabilityString:"",aria:"layout-address-picker",hideChevronIcon:P&&!(null===(b=y.defaultAddress)||void 0===b?void 0:b.shortname),onClick:U,shouldShowCurrentLocationIcon:F&&P,isAddressLabelEnabled:P,hasNoDefaultAddressShortname:!(null===(c=y.defaultAddress)||void 0===c?void 0:c.shortname),addressLabelIcon:(0,j.at)(null===(w=y.defaultAddress)||void 0===w?void 0:null===(x=w.personalAddressLabel)||void 0===x?void 0:x.labelIcon,!0)})}),J&&(0,e.jsx)(e.Fragment,{children:P?(0,e.jsx)(k.Z,{addressEntryPoint:"Common/Layout/Header/InfoPickerMobile",onChange:S,customizations:{renderAutocompleteSuggestionsInAnchoredLayer:!0,hideAutoCompleteLabel:!0},refetchQueries:A||z,hasCloseButton:!0,isCurrentLocationEnabled:void 0!==D&&D,isCurrentLocationSelected:F,onClose:function(){return K(!1)},onClickCurrentLocation:G}):(0,e.jsx)(f.Modal,{title:"",onClose:T,isFooterFixedPosition:!0,children:(0,e.jsx)(p.Z,{consumer:y,handleIdentityLinkClick:V,handlePickerClose:R,refetchQueries:A||z})})})]})};b.default=w},85194:function(a,b,c){c.d(b,{Z:function(){return h}});var d=c(85893);c(67294);var e=c(20779),f=c(35927),g=c(44529),h=function(a){var b=a.consumer,c=a.handlePickerClose,h=a.refetchQueries,i=a.renderBeforeAddressList,j=a.handleIdentityLinkClick,k=a.isCurrentLocationEnabled,l=a.isCurrentLocationSelected,m=a.onClickCurrentLocation,n=(0,g.p6)(),o=(null==n?void 0:n.id)||"",p=(0,f.F)(o,c);return(0,d.jsx)(e.Z,{addressEntryPoint:"Common/Layout/LayoutAddressPicker",consumer:b,onChange:p,refetchQueries:h,isStaticPositionSuggestions:!0,renderBeforeAddressList:i,handleIdentityLinkClick:j,isCurrentLocationEnabled:k,isCurrentLocationSelected:l,onClickCurrentLocation:m})}},35927:function(a,b,c){c.d(b,{F:function(){return m}});var d=c(47568),e=c(34051),f=c.n(e),g=c(67294),h=c(64370),i=c(42485),j=c(22453),k=c(45166),l=c(18507),m=function(a,b){var c,e=(0,i.Z)({cartId:a}),m=(0,k.S)().shouldShowOpenCarts,n=(0,l.N)().isPersistentCartEnabled,o=g.useCallback(function(b){return n?m?b:a:b},[a,n,m]),p=(0,h.M)().handleGiftIntentUpdate;return g.useCallback((c=(0,d.Z)(f().mark(function a(c,d){var g;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b(c),!(g=o(d))){a.next=12;break}return a.prev=3,a.next=6,e(g);case 6:p({addressId:null==c?void 0:c.id,addressLinkType:null==c?void 0:c.addressLinkType}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(3),(0,j.gs)({giftOptions:null,message:a.t0,entryPoint:j.JE.ADDRESS_PICKER});case 12:case"end":return a.stop()}},a,null,[[3,9]])})),function(a,b){return c.apply(this,arguments)}),[b,o,e,p,])}},42485:function(a,b,c){c.d(b,{o:function(){return m}});var d=c(26042),e=c(10253),f=c(7297),g=c(44119),h=c.n(g),i=c(93999),j=c(12390),k=c(73702);function l(){var a=(0,f.Z)(["\n  mutation removeCartGiftInfo($cartId: ID!) {\n    removeCartGiftInfo(cartId: $cartId)\n  }\n"]);return l=function(){return a},a}var m="GIFT_INFO_REMOVED_EVENT",n=h()(l()),o=function(a){var b=a.cartId,c=a.isMerchantShipping,f=void 0!==c&&c,g=a.updateApolloCache,h=void 0===g||g,l=a.refetchQueries,o=(0,e.Z)((0,i.useMutation)(n,{variables:{cartId:b},refetchQueries:l}),1)[0];return function(a){return o((0,d.Z)({variables:{cartId:a||b}},h?{update:function(c,d){var e=d.data;(0,k.vX)({cache:c,data:e,cartId:a||b})}}:{})).then(function(a){var b,c=(null===(b=a.data)||void 0===b?void 0:b.removeCartGiftInfo)===!0;if((0,j.Ep)({isMerchantShipping:f,isRemove:!0,isSuccessful:c}),c)window.dispatchEvent(new Event(m));else throw Error("unable to remove gift info from cart")})}};b.Z=o},25773:function(a,b,c){c.d(b,{Z:function(){return k}});var d=c(26042),e=c(85893),f=c(67294),g=c(64317),h={enter:150,exit:150},i={entering:{opacity:1},entered:{opacity:1}},j=function(a){var b=a.easing,c=a.mode,d=a.property,e=a.timeout;return"".concat(d," ").concat(e[c],"ms ").concat(void 0===b?"ease-in-out":b," 0s")},k=function(a){var b,c=a.appear,k=a.children,l=a.in,m=a.onEnter,n=a.onEntered,o=a.onExit,p=a.onExited,q=a.timeout,r=a.unmountOnExit,s="object"==typeof(b=void 0===q?h:q)?b:{enter:b,exit:b},t=function(a,b){var c=j({mode:"enter",property:"opacity",timeout:s});a.style.webkitTransition=c,a.style.transition=c,m&&m(a,b)},u=function(a){var b=j({mode:"exit",property:"opacity",timeout:s});a.style.webkitTransition=b,a.style.transition=b,o&&o(a)};return(0,e.jsx)(g.Transition,{appear:void 0!==c&&c,in:l,onEnter:t,onEntered:n,onExit:u,onExited:p,timeout:s,unmountOnExit:void 0===r||r,children:function(a,b){return f.cloneElement(k,(0,d.Z)({style:(0,d.Z)({opacity:0,visibility:"exited"!==a||l?"visible":"hidden"},i[a],k.props.style)},b))}})}},1851:function(a,b,c){c.d(b,{Z:function(){return aK}});var d,e=c(85893),f=c(67294),g=c(26042),h=c(69396),i=c(51351),j=c(88482),k=c(7297),l=c(87379),m=c(10071),n=c(24906);function o(){var a=(0,k.Z)(["\n  :hover path {\n    fill: ",";\n  }\n"]);return o=function(){return a},a}function p(){var a=(0,k.Z)(["\n  position: absolute;\n  right: -","px;\n  top: ","px;\n"]);return p=function(){return a},a}function q(){var a=(0,k.Z)(["\n  display: flex;\n  align-items: center;\n  margin-left: ","px;\n  margin-right: ","px;\n  position: relative;\n  cursor: pointer;\n  width: ","px;\n  height: ","px;\n"]);return q=function(){return a},a}var r=(0,l.default)(n.IconButton).withConfig({componentId:"sc-bdc84561-0"})(o(),function(a){return a.isSelected&&m.Colors.ButtonPrimaryToggleBackgroundHovered}),s=(0,l.default)(m.Icon).attrs(function(){return{type:m.Icon.Types.StatusDotOpenColor,size:m.Icon.Sizes.Small,color:m.Icon.Colors.TextAccentedPrimary}}).withConfig({componentId:"sc-bdc84561-1"})(p(),m.Spacing.XxxxSmall,m.Spacing.XxxxSmall),t=l.default.div.withConfig({componentId:"sc-bdc84561-2"})(q(),m.Spacing.XxSmall,m.Spacing.XxSmall,m.Spacing.Large,m.Spacing.XLarge),u=c(10253),v=c(3532),w=c(44119),x=c.n(w),y=c(93999);function z(){var a=(0,k.Z)(["\n  query getHasNewNotifications {\n    getHasNewNotifications {\n      hasNewNotifications\n    }\n  }\n"]);return z=function(){return a},a}var A,B=x()(z()),C=c(74269),D=c(50625),E=c(51112),F=function(){var a,b,c=f.useRef(!1),d=null!==(a=(0,y.useQuery)(B,{variables:{},fetchPolicy:"network-only",errorPolicy:"all"}))&&void 0!==a?a:{},e=d.loading,g=d.data,h=d.error,i=null!==(b=null==g?void 0:g.getHasNewNotifications)&&void 0!==b?b:{},j=i.hasNewNotifications;return e||(null==j?(c.current=!1,(0,v.hd)({origin:"useHasNewNotifications",client_error_id:C.N.Query,component:D.F.Notifications,error_message:(0,E.yd)(h),internal_error_message:C.D.HasNewNotificationsError,error_type:C.N.Query})):c.current=j),c.current},G=f.createContext({notifications:null,setNotifications:function(){return null},providerExistsAsParent:!1,showNotificationsContainer:!1,setShowNotificationsContainer:function(){return null},hasViewedNotifications:!1,hasNewNotifications:!1,setHasViewedNotifications:function(){return null}}),H=function(){var a;return f.useContext(G)},I=function(a){var b=a.children,c=(0,u.Z)(f.useState(!1),2),d=c[0],g=c[1],h=(0,u.Z)(f.useState(null),2),i=h[0],j=h[1],k=(0,u.Z)(f.useState(!1),2),l=k[0],m=k[1],n={providerExistsAsParent:!0,showNotificationsContainer:d,setShowNotificationsContainer:g,hasViewedNotifications:l,setHasViewedNotifications:m,hasNewNotifications:F(),notifications:i,setNotifications:j};return(0,e.jsx)(G.Provider,{value:n,children:b})},J=c(20688),K=c(72007),L=c(61966);(A=d||(d={})).StaticOrderTracker="StaticOrderTracker",A.LiveOrderTracker="LiveOrderTracker";var M=c(10395),N=function(a){var b=a.pollInterval,c=a.shouldPoll,e=(0,L.$0)({shouldPoll:void 0!==c&&c,pollInterval:b,dvToDisablePolling:M.P$.enableNotificationHubOrderBadgePolling}),f=e.orders,g=e.loading,h=e.error,i=g||h||!(f.length>0)?[]:(0,K.XS)(f),j=i.length,k=j>0,l=null;return k&&(l=1===j?d.LiveOrderTracker:d.StaticOrderTracker),{inProgressOrders:i,hasOrderTracker:k,orderTrackerType:l,count:j,ordersLoading:g,error:h}},O=function(a){var b=a.shouldPoll,c=H(),d=c.hasNewNotifications,e=c.hasViewedNotifications,f=c.showNotificationsContainer,g=N({shouldPoll:b}),h=g.hasOrderTracker,i=g.error;return i&&(0,v.hd)({origin:"useGetOrderTrackerDetailsWithPolling",client_error_id:C.N.Query,component:D.F.Notifications,error_message:(0,E.yd)(i),internal_error_message:C.D.NotificationHubOrderDetailsError,error_type:C.N.Query}),{shouldShowBadging:!f&&(d&&!e||h),hasOrderTracker:h}},P=function(a){var b=a.isBellIconSelected,c=a.onBellIconClick,d=a.describedBy,f=H().showNotificationsContainer,g=O({shouldPoll:!f}),h=g.shouldShowBadging,i=g.hasOrderTracker,j=function(){(0,v.ZP)("notif_hub_entry_point_click",{is_badged:h,has_active_order:i,action_button:!f}),c()};return(0,e.jsxs)(t,{onClick:j,"data-testid":J.dM.NotificationBell,children:[(0,e.jsx)(r,{isSelected:b,iconType:b?n.IconButtonIconType.NotifyFill:n.IconButtonIconType.NotifyLine,type:n.IconButtonType.Plain,size:n.IconButton.Sizes.Medium,accessibilityLabel:"Notification Bell",accessibilityDescribedBy:d}),h&&(0,e.jsx)(s,{})]})},Q=c(87620),R=c(23685),S=c(45481);function T(){var a=(0,k.Z)(["\nwidth: 100%;\nheight ","px;\ndisplay: flex;\nflex-direction: column;\njustify-content: center;\npadding-left: ","px;\n"]);return T=function(){return a},a}function U(){var a=(0,k.Z)(["\n  width: ",";\n  min-height: ","px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return U=function(){return a},a}function V(){var a=(0,k.Z)(["\n  ",";\n"]);return V=function(){return a},a}function W(){var a=(0,k.Z)(["\n  height: ","px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return W=function(){return a},a}function X(){var a=(0,k.Z)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return X=function(){return a},a}function Y(){var a=(0,k.Z)(["\n  max-width: 280px;\n  margin-left: -","px;\n  margin-top: ","px;\n"]);return Y=function(){return a},a}function Z(){var a=(0,k.Z)(["\n  max-width: 280px;\n  margin-left: ","px;\n"]);return Z=function(){return a},a}function $(){var a=(0,k.Z)(["\n  text-align: center;\n"]);return $=function(){return a},a}function _(){var a=(0,k.Z)(["\n  margin: ","px;\n"]);return _=function(){return a},a}var aa=l.default.div.withConfig({componentId:"sc-31fa65ff-0"})(T(),48,m.Spacing.Small),ab=(0,l.default)("div").withConfig({componentId:"sc-31fa65ff-1"})(U(),function(a){return a.isMobile?"100%":"".concat(375,"px")},532),ac=(0,l.default)("div").withConfig({componentId:"sc-31fa65ff-2"})(V(),function(a){return!a.isMobile&&"height: ".concat(484,"px;\n  overflow-y:auto")}),ad=l.default.div.withConfig({componentId:"sc-31fa65ff-3"})(W(),532),ae=l.default.div.withConfig({componentId:"sc-31fa65ff-4"})(X()),af=l.default.img.withConfig({componentId:"sc-31fa65ff-5"})(Y(),m.Spacing.Small,m.Spacing.XLarge),ag=l.default.img.withConfig({componentId:"sc-31fa65ff-6"})(Z(),m.Spacing.Large),ah=(0,l.default)(m.Text).withConfig({componentId:"sc-31fa65ff-7"})($()),ai=(0,l.default)(m.Stack).withConfig({componentId:"sc-31fa65ff-8"})(_(),m.Spacing.Large),aj=c(11698),ak=c(70114),al=c(7634),am={notification1:"".concat(S.TC,"s/managed/consumer/growth/emptyHubNotif1.svg"),notification2:"".concat(S.TC,"s/managed/consumer/growth/emptyHubNotif2.svg")},an=function(a){var b=a.browseButtonClickHandler,c=(0,aj.ac)().isMobile,d=function(){(0,v.ZP)("notif_hub_browse_stores_click"),b&&b()};return(0,e.jsxs)(ae,{"data-testid":J.dM.EmptyHub,children:[(0,e.jsx)(af,{src:am.notification1}),(0,e.jsx)(ag,{src:am.notification2}),(0,e.jsxs)(ai,{children:[(0,e.jsx)(ah,{styles:m.Text.Styles.Body1Emphasis,children:R.default.t("notificationsHub_nothingToSeeHereYet")}),(0,e.jsx)(ah,{styles:m.Text.Styles.Body2,color:m.Text.Colors.TextTertiary,children:R.default.t("notificationsHub_startBrowsing")})]}),c&&b&&(0,e.jsx)(al.ZP,{isInline:!0,type:n.default.Types.PrimaryPill,size:n.default.Sizes.Medium,"data-accessibility-id":"no-notifications-browse","data-anchor-id":"NoNotificationsBrowse",href:ak.ZP.home,onClick:d,children:R.default.t("notificationsHub_browseTheNeighborhood")})]})},ao=c(6269),ap=c(23397),aq=c(98658),ar=function(a){var b=a.notificationsLegoData;return b?(0,e.jsx)("div",{"data-testid":J.dM.NotificationsLego,children:(0,e.jsx)(ao.Z,{entry:ap.Dw.NOTIFICATION_HUB,cursor:"",data:b,debugMode:!1,children:function(a){return a.data&&(0,e.jsx)(aq.Z,{data:b})}})}):null},as=c(43948),at=c(97405),au=function(a){var b,c,d=null!==(c=(b=a,(0,y.useQuery)(as.YM,{variables:b,fetchPolicy:"network-only",errorPolicy:"all"})))&&void 0!==c?c:{},e=d.loading,f=d.data,g=d.error,h=null;return e||(null==f?(0,v.hd)({origin:"useGetNotifications",client_error_id:C.N.Query,component:D.F.Notifications,error_message:(0,E.yd)(g),internal_error_message:C.D.GetNotificationsError,error_type:C.N.Query}):h=(0,at.Iv)((0,at.bP)(f))),{legoNotifications:h,loading:e}},av=c(2886),aw=c(11890),ax=c(95899),ay=c(5152),az=c.n(ay),aA=az()(function(){return Promise.all([c.e(3750),c.e(2770),c.e(4812),c.e(9957)]).then(c.bind(c,25804))},{loadableGenerated:{webpack:function(){return[25804]}},ssr:!1}),aB=az()(function(){return c.e(9913).then(c.bind(c,99913))},{loadableGenerated:{webpack:function(){return[99913]}},ssr:!1}),aC=function(a){var b,c=a.orderTrackerType,f=a.count,g=a.inProgressOrders;if(!a.hasOrderTracker||!g.length)return null;var h=null===(b=g[0])||void 0===b?void 0:b.orderUuid;return(0,e.jsxs)(e.Fragment,{children:[c===d.LiveOrderTracker&&h&&(0,e.jsx)(aA,{orderUuid:h,count:f,orderDetails:g[0]}),c===d.StaticOrderTracker&&(0,e.jsx)(aB,{count:f,inProgressOrders:g})]})},aD=function(a){var b,c,d,g=a.setNotifications,h=a.browseButtonClickHandler,i=f.useContext(av.Uu).consumer.firstName,j=N({}),k=j.inProgressOrders,l=j.hasOrderTracker,n=j.orderTrackerType,o=j.count,p=j.ordersLoading,q=j.error;q&&(0,v.hd)({origin:"useGetOrderTrackerDetails",client_error_id:C.N.Query,component:D.F.Notifications,error_message:(0,E.yd)(q),internal_error_message:C.D.NotificationHubOrderDetailsError,error_type:C.N.Query});var r=(0,aj.ac)().isMobile,s=au({cursor:""}),t=s.legoNotifications,u=s.loading;(0,Q.ZP)(function(){g(t)},[t,g]);var w=i?R.default.t("notificationsHub_hello_with_cx_name",{cxName:i}):R.default.t("notificationsHub_hello"),x=null==t?void 0:null===(b=t.body)||void 0===b?void 0:null===(c=b[0])||void 0===c?void 0:null===(d=c.body)||void 0===d?void 0:d.length;return f.useEffect(function(){void 0!==x&&(0,v.ZP)("notif_hub_page_view",{num_items:x})},[x]),(0,e.jsx)(ab,{isMobile:r,children:u||p?(0,e.jsx)(ad,{"data-testid":J.dM.NotificationsLoading,children:(0,e.jsx)(aw.default,{})}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(aa,{children:(0,e.jsx)(m.Text,{styles:r?m.Text.Styles.PageTitle1:m.Text.Styles.Title2,children:w})}),!l&&(r?(0,e.jsx)(m.Stack,{}):(0,e.jsx)(ax.default,{type:ax.default.Types.FullBorder})),x||l?(0,e.jsxs)(ac,{isMobile:r,children:[(0,e.jsx)(aC,{orderTrackerType:n,inProgressOrders:k,count:o,hasOrderTracker:l}),(0,e.jsx)(ar,{notificationsLegoData:t})]}):(0,e.jsx)(an,{browseButtonClickHandler:h})]})})},aE=c(1968),aF=c(19302),aG=function(a){var a=null!==a?a:(0,i.Z)(TypeError("Cannot destructure undefined")),b=H(),c=b.setNotifications,d=b.showNotificationsContainer,k=b.setShowNotificationsContainer,l=b.setHasViewedNotifications,m=(0,aj.ac)().isMobile,n=O({shouldPoll:!1}),o=n.shouldShowBadging,p=n.hasOrderTracker,q=(0,aF.Z)(function(){(0,v.ZP)("notif_hub_entry_point_view",{is_badged:o,has_active_order:p})},1e3);f.useEffect(function(){q.callback()},[]);var r=function(){l(d),k(!d)},s=function(a){l(d),k(a)},t=function(){l(d),k(!1)};return m?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(P,{isBellIconSelected:d,onBellIconClick:r,describedBy:""}),d&&(0,e.jsx)(aE.Modal,{title:"","data-testid":"NotificationsModal",onClose:t,isFullScreenOnMobile:!0,hasContentPadding:!1,hasHeaderPadding:!0,children:(0,e.jsx)(aD,{setNotifications:c,browseButtonClickHandler:t})})]}):(0,e.jsx)(j.ZP,(0,h.Z)((0,g.Z)({},{id:"notifications-hub"}),{content:(0,e.jsx)(aD,{setNotifications:c}),isVisible:d,onVisibilityChange:s,position:j.ZP.Positions.BottomRight,children:function(a){var b=a.describedBy;return(0,e.jsx)(P,{isBellIconSelected:d,onBellIconClick:r,describedBy:b})}}))},aH=function(){return null};aH.Provider=I,aH.Container=aG;var aI=aH,aJ=c(83937),aK=function(){var a=f.useContext(av.Uu).consumer,b=(0,aJ.iL)();return(null==a?void 0:a.isGuest)||!b?null:(0,e.jsx)(aI.Provider,{children:(0,e.jsx)(aI.Container,{})})}},44536:function(a,b,c){c.d(b,{Jn:function(){return e},Mx:function(){return k},OS:function(){return j},S:function(){return g},"X$":function(){return h},Yy:function(){return o},Z6:function(){return i},en:function(){return l},gS:function(){return m},sb:function(){return f},wO:function(){return n}});var d=c(3532),e=function(a,b){return(0,d.ZP)("cx_web_order_history_view_store_click",{store_id:b,cart_id:a})},f=function(a,b,c){return(0,d.ZP)("cx_web_order_history_reorder_click",{store_id:b,cart_id:a,is_group:c})},g=function(a){return(0,d.ZP)("w_order_tracker_order_prompt_banner",{order_uuid:a,screen:"order_history",action:"order_history_resolution_click"})},h=function(){return(0,d.ZP)("consumer_orders_with_details_more_orders")},i=function(){return(0,d.ZP)("order_history_page_load")},j=function(){return(0,d.ZP)("order_help_page_load")},k=function(a){return(0,d.ZP)("order_action_tap_add_review",{store_id:a,placement:"history"})},l=function(a){var b=a.orderUuid,c=a.isBundle,e=a.bundleOrderPosition;return(0,d.ZP)("cx_web_order_history_view_order_tracker_click",{order_uuid:b,is_bundled:void 0!==c&&c,bundle_order_position:e})},m=function(a){var b=a.orderUuid,c=a.isBundle;return(0,d.ZP)("card_view",{order_uuid:b,is_bundled:void 0!==c&&c,is_live_order:!0})},n=function(){return(0,d.ZP)("cx_web_order_history_order_tooltip",{type:"bundle_dx"})},o=function(a){var b=a.orderUuid;return(0,d.ZP)("cx_web_order_history_bundle_mismatch",{order_uuid:b})}},36387:function(a,b,c){c.d(b,{Ar:function(){return o},D8:function(){return p},Ez:function(){return q},Oh:function(){return s},bG:function(){return d},fA:function(){return n},h2:function(){return l},ve:function(){return m}});var d,e,f=c(10253),g=c(43174),h=c.n(g),i=c(70114),j=c(53e3),k=c(72007),l=function(a,b){var c=(0,f.Z)(h()(a,function(a){return!b(a)}),2),d=c[0],e=c[1];return{uncompletedOrders:d,completedOrders:e}},m=function(a,b){var c=(0,f.Z)(h()(a,b),2),d=c[0],e=c[1];return{openOrders:e,inProgressOrders:d}},n=function(a,b){return{recurringDeliveryOrders:(0,f.Z)(h()(a,b),1)[0]}};(e=d||(d={}))[e.History=0]="History",e[e.Help=1]="Help";var o=function(a,b){var c=(0,f.Z)(h()(a,function(a){return b(a)}),2),d=c[0],e=c[1];return{pendingOrders:d,nonPendingOrders:e}},p=function(a){return a===d.History||void 0},q=function(a){switch(a){case j.a.Caviar:return{helpLink:"https://help.trycaviar.com/diners/s/"};case j.a.DoorDash:default:return{helpLink:"https://help.doordash.com/consumers/s/"}}},r=function(a,b,c){if(b)return c?(0,i.LT)(i.jY.postCheckout,{orderCartId:a}):void 0},s=function(a,b,c){var d,e,f,g=(0,k.BF)(a," â€¢"),h=(0,k.TT)(a),i=(0,k.lc)(a),j=(0,k.o6)(a,c),l=!!j,m=r(h,i,l),n=(d=h,e=i,f=l,"".concat(r(d,e,f),"help/"));return{cartId:h,consumerId:(0,k.$S)(a),href:b?m:n,isDashPass:(0,k.N3)(a),isGroupCart:(0,k.yE)(a),isSubmitted:(0,k.lc)(a),isCancelled:(0,k.Rz)(a),numItems:g.numItems,orderId:h,orderItemNames:g.orderItemsNames,orderTimestamp:j,priceToDisplay:(0,k.DY)(a),storeId:(0,k.Di)(a),storeName:(0,k.tC)(a),deliveryId:(0,k.mB)(a),isComplete:(0,k.H5)(a),isReorderable:(0,k.TQ)(a),isPending:(0,k.kO)(a),resolutionHref:m,viewReceiptHref:"".concat(m,"receipt"),creator:(0,k.nq)(a)}}},72007:function(a,b,c){c.d(b,{"$S":function(){return t},BF:function(){return z},DY:function(){return s},Di:function(){return B},Fw:function(){return F},H5:function(){return k},N3:function(){return w},P3:function(){return q},QD:function(){return p},Rz:function(){return l},TQ:function(){return m},TT:function(){return v},XS:function(){return H},kO:function(){return n},lc:function(){return o},mB:function(){return C},nO:function(){return E},nq:function(){return u},o6:function(){return x},tC:function(){return A},yE:function(){return r}});var d=c(29815),e=c(36387),f=c(33574),g=c(23685),h=c(11459),i=function(a){return Boolean(a.cancellationPendingRefundInfo&&"CANCELLATION_REFUND_STATE_PENDING"===a.cancellationPendingRefundInfo.state)},j=function(a){return!!(null==a?void 0:a.recurringOrderDetails)},k=function(a){return!!a.fulfilledAt||!!a.cancelledAt},l=function(a){return!!a.cancelledAt},m=function(a){return!!a.isReorderable},n=function(a){var b;return(null===(b=a.cancellationPendingRefundInfo)||void 0===b?void 0:b.state)==="CANCELLATION_REFUND_STATE_PENDING"},o=function(a){return!!a.submittedAt},p=function(a){return!!a.isMerchantShipping},q=function(a){return!!a.isPickup},r=function(a){return!!a.isGroup},s=function(a){var b,c;return null!==(c=null===(b=a.grandTotal)||void 0===b?void 0:b.displayString)&&void 0!==c?c:""},t=function(a){var b,c;return null!==(c=null===(b=a.creator)||void 0===b?void 0:b.id)&&void 0!==c?c:""},u=function(a){return a.creator},v=function(a){var b,c;return null!==(c=null!==(b=a.orderUuid)&&void 0!==b?b:a.id)&&void 0!==c?c:""},w=function(a){return!!a.isConsumerSubscriptionEligible},x=function(a,b){return a.cancelledAt?y(a.cancelledAt,b):a.fulfilledAt?y(a.fulfilledAt,b):a.submittedAt?D(a,b):y(a.createdAt,b)},y=function(a,b){return a?(0,f.formatDateTimeFromIsoString)({isoString:a,locale:g.default.getCurrentLocale(),dateOptions:f.DefaultDateTimeFormat.DAY_OF_WEEK_MONTH_DATE_SHORT.value,timeZone:b}):""},z=function(a){var b,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",d=0,e=[];return null===(b=a.orders)||void 0===b||b.forEach(function(a){var b,c=null!==(b=null==a?void 0:a.items)&&void 0!==b?b:[];d+=c.length||0,c.forEach(function(a){(null==a?void 0:a.name)&&e.push(null==a?void 0:a.name)})}),{numItems:d,orderItemsNames:e.join("".concat(c," "))}},A=function(a){var b;return(null===(b=a.store)||void 0===b?void 0:b.name)||""},B=function(a){var b;return(null===(b=a.store)||void 0===b?void 0:b.id)||""},C=function(a){return a.deliveryUuid||""},D=function(a,b){return y(a.submittedAt,b)},E=function(a){var b,c=(0,e.Ar)(a,i),f=c.pendingOrders,g=c.nonPendingOrders,h=I(g),l=K(h,g),m=(0,e.h2)(l,k),n=m.uncompletedOrders,p=m.completedOrders,q=(0,e.ve)(n,o),r=q.inProgressOrders,s=q.openOrders,t=(0,e.fA)(s,j).recurringDeliveryOrders;return h.length>0&&(b=r).push.apply(b,(0,d.Z)(h)),{openOrders:s,inProgressOrders:r,completedOrders:p,recurringDeliveryOrders:t,pendingOrders:f}},F=function(a){var b=[];return a.orders.forEach(function(a){null!==a.orderUuid&&b.push(a.orderUuid)}),b.length>0?b:null},G=function(a){return!k(a)&&o(a)},H=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.filter(function(a){return G(a)})},I=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return a.filter(function(b){var c,d,e,f,g,i;return(null===(c=b.bundleOrderInfo)||void 0===c?void 0:null===(d=c.bundleOrderConfig)||void 0===d?void 0:d.bundleType)===h.v5.BUNDLE_TYPE_POST_CHECKOUT&&(null===(e=b.bundleOrderInfo)||void 0===e?void 0:null===(f=e.bundleOrderConfig)||void 0===f?void 0:f.bundleOrderRole)===h.RZ.BUNDLE_ORDER_ROLE_PRIMARY_ORDER&&(!!G(b)||J(a,null!==(i=null==b?void 0:null===(g=b.bundleOrderInfo)||void 0===g?void 0:g.bundleOrderUuids)&&void 0!==i?i:[]))})},J=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return null!=a.find(function(a){return b.includes(a.orderUuid)&&G(a)})},K=function(){var a,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=[];return b.forEach(function(a){var b,c,f,g;e.push(null!==(f=a.orderUuid)&&void 0!==f?f:""),(b=e).push.apply(b,(0,d.Z)(null!==(g=null==a?void 0:null===(c=a.bundleOrderInfo)||void 0===c?void 0:c.bundleOrderUuids)&&void 0!==g?g:[]))}),c.filter(function(b){return!e.includes(null!==(a=null==b?void 0:b.orderUuid)&&void 0!==a?a:"")})}},61966:function(a,b,c){c.d(b,{m3:function(){return r},"$0":function(){return u}});var d=c(26042),e=c(69396),f=c(10253),g=c(7297),h=c(29815),i=c(44119),j=c.n(i),k=c(67294),l=c(93999),m=c(87185),n=c.n(m),o=c(44536);function p(){var a=(0,g.Z)(["\n  query getConsumerOrdersWithDetails(\n    $offset: Int!\n    $limit: Int!\n    $includeCancelled: Boolean\n  ) {\n    getConsumerOrdersWithDetails(\n      offset: $offset\n      limit: $limit\n      includeCancelled: $includeCancelled\n    ) {\n      id\n      orderUuid\n      deliveryUuid\n      createdAt\n      submittedAt\n      cancelledAt\n      fulfilledAt\n      specialInstructions\n      isConsumerSubscriptionEligible\n      isGroup\n      isReorderable\n      isGift\n      isPickup\n      isMerchantShipping\n      containsAlcohol\n      creator {\n        ...ConsumerOrderCreatorFragment\n      }\n      deliveryAddress {\n        id\n        formattedAddress\n      }\n      orders {\n        id\n        creator {\n          ...ConsumerOrderCreatorFragment\n        }\n        items {\n          ...ConsumerOrderOrderItemFragment\n        }\n      }\n      paymentCard {\n        ...ConsumerOrderPaymentCardFragment\n      }\n      grandTotal {\n        unitAmount\n        currency\n        decimalPlaces\n        displayString\n        sign\n      }\n      likelyOosItems {\n        menuItemId\n        name\n        photoUrl\n      }\n      pollingInterval\n      store {\n        id\n        name\n        business {\n          id\n          name\n        }\n        phoneNumber\n        fulfillsOwnDeliveries\n        customerArrivedPickupInstructions\n        isPriceMatchingEnabled\n        priceMatchGuaranteeInfo {\n          headerDisplayString\n          bodyDisplayString\n          buttonDisplayString\n        }\n      }\n      recurringOrderDetails {\n        itemNames\n        consumerId\n        recurringOrderUpcomingOrderUuid\n        scheduledDeliveryDate\n        arrivalTimeDisplayString\n        storeName\n        isCancelled\n      }\n      bundleOrderInfo {\n        ...BundleOrderInfoFragment\n      }\n      cancellationPendingRefundInfo {\n        state\n        originalPaymentAmount {\n          unitAmount\n          currency\n          decimalPlaces\n          displayString\n          sign\n        }\n        creditAmount {\n          unitAmount\n          currency\n          decimalPlaces\n          displayString\n          sign\n        }\n      }\n    }\n  }\n\n  fragment ConsumerOrderPaymentCardFragment on ConsumerOrderPaymentCard {\n    id\n    last4\n    type\n  }\n\n  fragment ConsumerOrderOrderItemFragment on ConsumerOrderOrderItem {\n    id\n    name\n    quantity\n    specialInstructions\n    substitutionPreferences\n    orderItemExtras {\n      ...ConsumerOrderOrderItemExtraFragment\n    }\n    purchaseQuantity {\n      ...ConsumerOrderQuantityFragment\n    }\n    fulfillQuantity {\n      ...ConsumerOrderQuantityFragment\n    }\n    originalItemPrice\n    purchaseType\n  }\n\n  fragment ConsumerOrderOrderItemExtraOptionFields on OrderItemExtraOption {\n    menuExtraOptionId\n    name\n    description\n    price\n    quantity\n  }\n\n  fragment ConsumerOrderOrderItemExtraOptionFragment on OrderItemExtraOption {\n    ...ConsumerOrderOrderItemExtraOptionFields\n    orderItemExtras {\n      ...ConsumerOrderOrderItemExtraFields\n      orderItemExtraOptions {\n        ...ConsumerOrderOrderItemExtraOptionFields\n        orderItemExtras {\n          ...ConsumerOrderOrderItemExtraFields\n        }\n      }\n    }\n  }\n\n  fragment ConsumerOrderOrderItemExtraFields on OrderItemExtra {\n    menuItemExtraId\n    name\n  }\n\n  fragment ConsumerOrderOrderItemExtraFragment on OrderItemExtra {\n    ...ConsumerOrderOrderItemExtraFields\n    orderItemExtraOptions {\n      ...ConsumerOrderOrderItemExtraOptionFragment\n    }\n  }\n\n  fragment ConsumerOrderCreatorFragment on ConsumerOrderCreator {\n    id\n    firstName\n    lastName\n  }\n\n  fragment ConsumerOrderQuantityFragment on Quantity {\n    continuousQuantity {\n      quantity\n      unit\n    }\n    discreteQuantity {\n      quantity\n      unit\n    }\n  }\n\n  fragment BundleOrderInfoFragment on BundleOrderInfo {\n    primaryBundleOrderUuid\n    primaryBundleOrderId\n    bundleOrderUuids\n    bundleOrderConfig {\n      ...BundleOrderConfigFragment\n    }\n  }\n\n  fragment BundleOrderConfigFragment on BundleOrderConfig {\n    bundleType\n    bundleOrderRole\n  }\n"]);return p=function(){return a},a}var q=j()(p()),r=function(){var a,b,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,g=k.useRef(1),i=k.useRef(0),j=(0,f.Z)(k.useState(!1),2),m=j[0],p=j[1],r=(0,l.useQuery)(q,{variables:{offset:0,limit:c,includeCancelled:!0},fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0}),s=null!==(b=null==r?void 0:null===(a=r.data)||void 0===a?void 0:a.getConsumerOrdersWithDetails)&&void 0!==b?b:[],t=function(){r.fetchMore({variables:{offset:10*g.current},updateQuery:function(a,b){var c,f,g=b.fetchMoreResult,j=null!==(c=a.getConsumerOrdersWithDetails)&&void 0!==c?c:[],k=null!==(f=null==g?void 0:g.getConsumerOrdersWithDetails)&&void 0!==f?f:[];if(!k.length)return p(!0),a;var l=k.length;i.current=i.current+l,l<10&&p(!0);var m=(0,h.Z)(j).concat((0,h.Z)(k)),o=n()(m,function(a,b){return a.id===b.id&&a.orderUuid===b.orderUuid});return o.sort(function(a,b){var c=a.createdAt,d=b.createdAt,e=c?new Date(c):new Date,f=d?new Date(d):new Date;return e<f?1:-1}),(0,e.Z)((0,d.Z)({},a),{getConsumerOrdersWithDetails:o})}}),g.current=g.current+1,(0,o.X$)()};return i.current||(i.current=s.length),{orders:s,fetchMoreOrders:t,loading:1===r.networkStatus,loadingPagination:3===r.networkStatus,isLastPage:m,error:r.error,startPolling:r.startPolling,stopPolling:r.stopPolling}},s=c(24401),t=function(){if(document)return document.hasFocus();throw Error("document is not found when evaluating window focus")},u=function(a){var b,c,d,e=a.limit,f=a.shouldPoll,g=a.pollInterval,h=void 0===g?6e4:g,i=a.dvToDisablePolling,j=r(void 0===e?5:e),l=j.orders,m=j.fetchMoreOrders,n=j.loading,o=j.loadingPagination,p=j.isLastPage,q=j.error,u=j.startPolling,v=j.stopPolling,w=(0,s.ZP)(null!=i?i:""),x=!i||w,y=(c=(b=(0,k.useState)(!0))[0],d=b[1],(0,k.useEffect)(function(){try{var a=t();d(a)}catch(b){d(!1)}var c=function(){return d(!0)},e=function(){return d(!1)};return window.addEventListener("focus",c),window.addEventListener("blur",e),function(){window.removeEventListener("focus",c),window.removeEventListener("blur",e)}},[]),{isWindowFocused:c}).isWindowFocused;return(0,k.useEffect)(function(){if(x){if(y&&f&&u){u(h);return}v&&v()}},[h,f,u,v,x,y,]),{orders:l,fetchMoreOrders:m,loading:n,loadingPagination:o,isLastPage:p,error:q,startPolling:u,stopPolling:v}}},64704:function(a,b,c){c.d(b,{p:function(){return n}});var d=c(85893);c(67294);var e=c(37835),f=c(11698),g=c(7297),h=c(87379),i=c(10071);function j(){var a=(0,g.Z)(["\n  ","\n"]);return j=function(){return a},a}var k=i.Spacing.XxLarge,l=h.default.div.withConfig({componentId:"sc-fc9dbe4e-0"})(j(),function(a){return a.isMobile&&"max-width: calc(100vw - ".concat(k,"px)")}),m=c(23685),n=function(a){var b=a.shouldShowInfoPickerTooltip,c=a.children,g=(0,f.ac)(),h=g.isMobileTablet,i=g.isMobile;return b?(0,d.jsx)(e.default,{isVisible:!0,size:e.default.Sizes.Small,position:h?e.default.Positions.BottomCenter:e.default.Positions.BottomLeft,content:(0,d.jsx)(l,{isMobile:i,children:m.default.t("seo_foodNearMePage_discovery_addressPickerTooltipContent")}),children:function(){return(0,d.jsx)(d.Fragment,{children:c})}}):(0,d.jsx)(d.Fragment,{children:c})}}}])