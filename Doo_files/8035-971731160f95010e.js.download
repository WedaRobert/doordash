"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8035],{78426:function(a,b,c){c.r(b),c.d(b,{AccountDetailsSection:function(){return A},AccountDetailsSectionLabel:function(){return z},Entry:function(){return f},default:function(){return B}});var d,e,f,g,h,i=c(85893),j=c(10071),k=c(67294),l=c(2886),m=c(26042),n=c(69396),o=c(53698),p=c(70179),q=c(26880),r=c(37581),s=c(3532),t=c(94526),u=c(1864),v=c(4082);(g=d||(d={})).SOCIAL="social",g.EXIT="exit",g.SUCCESS="success",g.HEIGHT="height",g.FAILED="failed",g.SEND_HEIGHT="sendHeight",g.SUCCESS_POST_LOGIN="successPostLogin",g.SUCCESS_POST_SIGNUP="successPostSignup",g.FAILED_POST_LOGIN="failedPostLogin",g.CLOSE_MODAL="closeModal",(h=e||(e={})).LOGIN="login",h.SIGNUP="signup";var w,x=function(a,b,c,f){var g=(0,v.bp)().cookies,h=(0,t.m)(),i=h.useGuidedLayout,j=h.queryParms,w=void 0===j?{}:j;b&&(w.is_iframe_modal=!0);var x=(0,l.RN)(),y=x.consumer,z=x.loading,A=(0,k.useRef)(),B=(0,k.useRef)(null),C=(0,o.Z)(),D=C.isCaviar?r.u.caviar_bff_production:r.u.doordash_identity_web_production,E=(0,k.useState)("500px"),F=E[0],G=E[1],H=y.isGuest,I=(0,p.Z)().setShowSignInSignUpModal,J=(0,k.useCallback)(function(a){var b=window.screen.width/2-225,c=window.screen.height/2-365;A.current&&!A.current.closed?A.current.location.replace(a):A.current=window.open(a,"window","menubar=no,location=no,resizable=no,scrollbars=no,status=no, width=".concat(450,",height=").concat(730,",top=").concat(c,", left=").concat(b))},[]),K=(0,k.useCallback)(function(a){if(!/^react-devtools/gi.test(a.data.source)){var b=function(a){if(window.removeEventListener("message",K),A&&A.current){var b;(0,s.ZP)("checkout_social_post_".concat(a,"_success")),null===(b=A.current)||void 0===b||b.close()}else(0,s.ZP)("checkout_post_".concat(a,"_success"));f?window.location.href=f:window.location.reload()};if(a.origin.includes("https://identity.doordash.com")||a.origin.includes("https://www.doordash.com")||a.origin.includes("https://www.trycaviar.com")||a.origin.includes("https://qa.trycaviar.com")||a.origin.includes("https://www.qa.trycaviar.com")||a.origin.includes("https://www.doordashtest.com")||a.origin.includes("https://www.identity-service.doorcrawl.com")||a.origin.includes("https://www.page-service.doordash.com")||a.origin.includes("https://www.page-service-qa.doordash.com")||a.origin.includes("https://page-service-qa.doordash.com")){var h=null==a?void 0:a.data;if(null==h?void 0:h.action)switch(null==h?void 0:h.action){case d.SOCIAL:J(h.socialLink);break;case d.EXIT:null===(i=A.current)||void 0===i||i.close();break;case d.SUCCESS_POST_LOGIN:b(e.LOGIN);break;case d.SUCCESS_POST_SIGNUP:var i,j,k,l,m,n,o,p=new Date;p.setFullYear(p.getFullYear()+1),g.set(u.E.new_user_signup,!0,{expires:p}),b(e.SIGNUP);break;case d.SUCCESS:A&&A.current?((0,s.ZP)("checkout_social_iframe_login_success"),null===(j=A.current)||void 0===j||j.close()):(0,s.ZP)("checkout_iframe_login_success"),I(!1);break;case d.HEIGHT:(0,s.ZP)("checkout_iframe_height"),B.current&&G(h.height+"px");break;case d.SEND_HEIGHT:null===(k=B.current)||void 0===k||null===(l=k.contentWindow)||void 0===l||null===(m=l.postMessage)||void 0===m||m.call(l,{action:"VIEWPORT_HEIGHT",height:window.innerHeight},"*");break;case d.FAILED:(0,s.ZP)("checkout_account_login_failed"),null==A||null===(n=A.current)||void 0===n||n.close();break;case d.CLOSE_MODAL:null==c||c();break;case d.FAILED_POST_LOGIN:(0,s.ZP)("checkout_account_post_login_failed"),(0,s.ZP)("signin_modal_closed"),I(!1),null==A||null===(o=A.current)||void 0===o||o.close(),fetch("https://identity.doordash.com/logout").finally(function(){(0,s.ZP)("checkout_identity_iframe_logout"),window.location.reload()})}}}},[J,I,c,f,g,]),L=(0,q.Zd)({settings:(0,n.Z)((0,m.Z)({},D),{layout:i?"guided_consumer_web_iframe":"identity_web_iframe",scope:"*",prompt:"none",responseType:"code"}),additionalParams:w,enableLastSocial:!1,navigateToSignUp:a,redirectBackAfterLogIn:!0});return{isGuest:H,loading:z,handlePostMessage:K,iframeRef:B,frameUrl:L,iframeHeight:F}},y=c(65999),z=function(){var a=k.useContext(l.Uu).consumer,b=a.email,c=a.isGuest;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.Text,{styles:j.Text.Styles.Bold24,style:{width:"100%"},children:y.Z.accountDetailsTitle()}),c?null:(0,i.jsx)(j.Text,{styles:j.Text.Styles.Medium16,style:{display:"flex",alignItems:"center"},children:b})]})};(w=f||(f={})).MODAL="modal",w.NON_MODAL="non_modal";var A=function(a){var b=a.navigateToSignUp,c=a.closeGuidedModal,d=a.entry,e=x(void 0!==b&&b,d===f.MODAL,c),g=e.isGuest,h=e.loading,j=e.handlePostMessage,l=e.iframeRef,m=e.frameUrl,n=e.iframeHeight;return(0,k.useEffect)(function(){return g&&window.addEventListener("message",j),function(){return window.removeEventListener("message",j)}},[g,h]),g&&!h?(0,i.jsx)("iframe",{width:"100%",title:"Login/Signup",src:m,ref:l,height:n,style:{border:"unset",display:"block"}}):null},B=A},17510:function(a,b,c){c.d(b,{AA:function(){return t},LU:function(){return v},Yi:function(){return q},ee:function(){return u},iS:function(){return s},mj:function(){return p},"q$":function(){return r}});var d=c(7297),e=c(10071),f=c(87379);function g(){var a=(0,d.Z)(["\n  position: relative;\n"]);return g=function(){return a},a}function h(){var a=(0,d.Z)(["\n            /* The 65% is to support when field labels are not hidden. */\n            bottom: ",";\n          "]);return h=function(){return a},a}function i(){var a=(0,d.Z)(["\n      position: ",";\n\n      ","\n\n      ","\n    "]);return i=function(){return a},a}function j(){var a=(0,d.Z)(["\n  padding-left: 0;\n  margin: 0;\n  background-color: ",";\n  border: 1px solid\n    ",";\n  border-radius: ","px;\n  overflow-y: auto;\n  /* Note: temporary styling, need to handle two layers in Popover */\n  z-index: 1000;\n  width: 100%;\n\n  ","\n\n  ","\n"]);return j=function(){return a},a}function k(){var a=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  color: inherit;\n  text-decoration: inherit;\n  min-height: ","px;\n  border-top: 1px solid ",";\n  padding: ","px ","px;\n  background-color: ",";\n\n  &:first-child {\n    border-top: none;\n  }\n\n  &:last-child {\n    position: sticky;\n    bottom: 0;\n    width: 100%;\n  }\n"]);return k=function(){return a},a}function l(){var a=(0,d.Z)([""]);return l=function(){return a},a}function m(){var a=(0,d.Z)(["\n  cursor: pointer;\n"]);return m=function(){return a},a}function n(){var a=(0,d.Z)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  ","\n"]);return n=function(){return a},a}function o(){var a=(0,d.Z)(["\n  padding: ","px;\n  display: flex;\n  justify-content: flex-end;\n  ","\n\n  picture {\n    display: block;\n    width: ",";\n  }\n"]);return o=function(){return a},a}var p=f.default.div.withConfig({componentId:"sc-7981fc6f-0"})(g()),q=f.default.div.withConfig({componentId:"sc-7981fc6f-1"})(j(),e.Colors.PageBackgroundPrimary,function(a){return a.isNewDesignEnabled?e.Colors.BorderPrimary:e.Colors.BorderSecondary},e.BorderRadius.Small,function(a){return!a.isNewDesignEnabled&&"max-height: ".concat(250,"px;")},function(a){var b=a.isStaticPositionSuggestions,c=a.shouldFlipResults,d=a.isLabelHidden,g=a.isNewDesignEnabled;return(0,f.css)(i(),b?"static":"absolute",c?(0,f.css)(h(),d?"100%":"65%"):"top: 100%;",g&&"\n        border-radius: ".concat(e.BorderRadius.Large,"px;\n        box-shadow: ").concat(e.Shadows.Medium,";\n      "))}),r=(0,f.default)(e.Text).attrs(function(){return{styles:e.Text.Styles.Regular14}}).withConfig({componentId:"sc-7981fc6f-2"})(k(),e.Spacing.XxLarge,e.Colors.BorderSecondary,e.Spacing.XxxSmall,e.Spacing.Medium,function(a){return a.active?e.Colors.PageBackgroundSecondary:e.Colors.PageBackgroundPrimary}),s=f.default.div.withConfig({componentId:"sc-7981fc6f-3"})(l()),t=(0,f.default)(r).withConfig({componentId:"sc-7981fc6f-4"})(m()),u=f.default.div.withConfig({componentId:"sc-7981fc6f-5"})(n(),function(a){return a.hasMarginLeft&&"margin-left: ".concat(e.Spacing.XxSmall,"px;")}),v=f.default.div.withConfig({componentId:"sc-7981fc6f-6"})(o(),e.Spacing.Small,function(a){return a.hasBorderTop&&"border-top: 1px solid ".concat(e.Colors.BorderPrimary,";")},function(a){var b=a.size;return"".concat(b,"px")})},34551:function(a,b,c){c.d(b,{e:function(){return j},f:function(){return i}});var d=c(85893),e=c(67294),f=c(98893),g=c(34155),h=e.createContext({isStaticPosition:!1,isEnabled:!1,showBoxShadow:!0,addressSuggestions:[],queryCalled:!1,shouldRenderAddressSuggestions:!1,showErrorMessage:!1,showSuggestionsList:!1,showNearByTitleWithLoading:!1,showGetCurrentLocationButton:!1,isLoading:!1,shouldStartFetchingAddress:!1,providerExistsAsParent:!1,fetchGeoLocationAddresses:function(){},requestGeoLocationPermissionOnLoad:!1}),i=function(){var a,b=e.useContext(h);return(null==g?void 0:null===(a=g.env)||void 0===a?void 0:"production")!=="development"||(null==b?void 0:b.providerExistsAsParent)||console.error("useGeoLocationSuggestionsContext must be used within a GeoLocationSuggestionsProvider"),b},j=function(a){var b=a.isEnabled,c=void 0!==b&&b,g=a.isStaticPosition,i=a.showBoxShadow,j=a.children,k=a.showSuggestionOnInputFocus,l=void 0!==k&&k,m=a.requestGeoLocationPermissionOnLoad,n=void 0!==m&&m,o=(0,f.T)(),p=o.fetchGeoLocationAddresses,q=o.addressList,r=o.loading,s=o.geoError,t=o.addressFetchError,u=o.geoLocationPermission,v=o.queryCalled,w=o.addressExistsOnSessionStorage,x=c&&(null==u?void 0:u.state)!==(null===f.m||void 0===f.m?void 0:f.m.DENIED)&&!s&&!((null==u?void 0:u.state)===(null===f.m||void 0===f.m?void 0:f.m.PROMPT)&&n),y=v&&!q.length&&!r&&!(t&&!r),z=!(null==q?void 0:q.length)&&(null==u?void 0:u.state)===(null===f.m||void 0===f.m?void 0:f.m.PROMPT)&&!n,A=r&&!(null==q?void 0:q.length),B=t||y,C=!!(null==q?void 0:q.length)&&!B,D=(null==u?void 0:u.state)===(null===f.m||void 0===f.m?void 0:f.m.GRANTED)&&A&&!w,E=c&&((null==u?void 0:u.state)===(null===f.m||void 0===f.m?void 0:f.m.GRANTED)&&!w||n);e.useEffect(function(){E&&p()},[E]);var F=e.useMemo(function(){return{isEnabled:c,isStaticPosition:g,showBoxShadow:i,addressSuggestions:q,queryCalled:v,shouldRenderAddressSuggestions:x,showErrorMessage:B,showSuggestionsList:C,showNearByTitleWithLoading:D,showGetCurrentLocationButton:z,isLoading:A,shouldStartFetchingAddress:E,showSuggestionOnInputFocus:l,providerExistsAsParent:!0,fetchGeoLocationAddresses:p,requestGeoLocationPermissionOnLoad:n}},[c,g,i,q.length,v,x,B,C,z,D,A,null==u?void 0:u.state,E,l,p,n,]);return(0,d.jsx)(h.Provider,{value:F,children:j})}},949:function(a,b,c){c.d(b,{Ek:function(){return D},N:function(){return y},Y3:function(){return F},ct:function(){return E},jn:function(){return z},rb:function(){return A}});var d=c(7297),e=c(10071),f=c(87379),g=c(17510);function h(){var a=(0,d.Z)(["\n      box-shadow: ",";\n    "]);return h=function(){return a},a}function i(){var a=(0,d.Z)(["\n  ","\n  border-radius: ","px;\n  margin-top: ","px;\n"]);return i=function(){return a},a}function j(){var a=(0,d.Z)(["\n      &:hover {\n        background-color: ",";\n      }\n    "]);return j=function(){return a},a}function k(){var a=(0,d.Z)(["\n      font-weight: ",";\n      padding: ","px ","px;\n    "]);return k=function(){return a},a}function l(){var a=(0,d.Z)(["\n      cursor: initial;\n    "]);return l=function(){return a},a}function m(){var a=(0,d.Z)(["\n    padding: 0 ","px;\n  "]);return m=function(){return a},a}function n(){var a=(0,d.Z)(["\n      padding: 0;\n    "]);return n=function(){return a},a}function o(){var a=(0,d.Z)(["\n      position: sticky;\n      z-index: 99;\n    "]);return o=function(){return a},a}function p(){var a=(0,d.Z)(["\n  font-size:15px;\n  color: ",";\n  padding: 0px ","px;\n  align-items: center;\n  min-height: ","px;\n  ","\n\n  ","  \n  ","\n  &:first-child {\n    border-bottom: none;\n    color: ",";\n  }\n  &:last-child {\n    position: static;\n  }\n  ","\n  ","\n  "," \n  .geo-location-address-list-cell-title {\n    font-size: 15px;\n  } \n "]);return p=function(){return a},a}function q(){var a=(0,d.Z)(["\n      margin-right: ","px;\n    "]);return q=function(){return a},a}function r(){var a=(0,d.Z)(["\n  margin-left: auto;\n  ","\n"]);return r=function(){return a},a}function s(){var a=(0,d.Z)(["\n  display: flex;\n  align-items: center;\n  line-height: ","px;\n  cursor: pointer;\n  border: none;\n  background-color: inherit;\n  padding: 0px;\n  font-size: 15px;\n"]);return s=function(){return a},a}function t(){var a=(0,d.Z)(["\n  width: 100%;\n  display: grid;\n  grid-template-rows: auto auto auto;\n  grid-template-columns: auto 1fr;\n  grid-column-gap: ","px;\n  padding: 0px;\n"]);return t=function(){return a},a}function u(){var a=(0,d.Z)(["\n    padding: 0px;\n    font-weight: 600;\n  "]);return u=function(){return a},a}function v(){var a=(0,d.Z)(["\n  font-family: inherit;\n  max-width: 100%;\n  font-weight: bold;\n  text-align: left;\n  color: ",";\n  ",";\n  padding: ","px ","px;\n  ","\n"]);return v=function(){return a},a}function w(){var a=(0,d.Z)(["\n  min-height: ","px;\n  display: flex;\n  flex-direction: row;\n  align-items: top;\n  width: 100%;\n  font-family: inherit;\n  div > div {\n    padding-left: 0px;\n  }\n  > div:first-of-type {\n    padding: 0px !important;\n  }\n"]);return w=function(){return a},a}function x(){var a=(0,d.Z)(["\n  font-weight: bold;\n  color: ",";\n  ",";\n  align-items: center;\n  text-align: left;\n  svg {\n    vertical-align: middle;\n  }\n"]);return x=function(){return a},a}var y=(0,f.default)(g.Yi).attrs(function(a){return{tabindex:a.tabIndex}}).withConfig({componentId:"sc-497a9119-0"})(i(),function(a){return a.showBoxShadow&&(0,f.css)(h(),e.Shadows.Base)},e.BorderRadius.Small,e.Spacing.XxxxSmall),z=(0,f.default)(g.AA).attrs(function(a){return{tabindex:a.tabIndex}}).withConfig({componentId:"sc-497a9119-1"})(p(),e.Colors.TextSecondary,e.Spacing.Large,36,function(a){return a.hover&&(0,f.css)(j(),e.Colors.BackgroundSecondary)},function(a){return a.isTitle&&(0,f.css)(k(),e.Text.Weights.Bold,e.Spacing.XxSmall,e.Spacing.Large)},function(a){return!a.clickAble&&(0,f.css)(l())},e.Colors.TextSecondary,e.Media.MobileOnly(m(),e.Spacing.XxSmall),function(a){return a.disablePadding&&(0,f.css)(n())},function(a){return a.sticky&&(0,f.css)(o())}),A=f.default.div.withConfig({componentId:"sc-497a9119-2"})(r(),function(a){return a.addRightMargin&&(0,f.css)(q(),e.Spacing.Large)}),B=f.default.button.withConfig({componentId:"sc-497a9119-3"})(s(),e.Text.LineHeights.S14),C=(0,f.css)(t(),e.Spacing.Small),D=(0,f.default)(B).withConfig({componentId:"sc-497a9119-4"})(v(),e.Colors.TextSecondary,C,e.Spacing.XxxxSmall,e.Spacing.Large,e.Media.MobileOnly(u())),E=(0,f.default)(B).withConfig({componentId:"sc-497a9119-5"})(w(),36),F=f.default.span.withConfig({componentId:"sc-497a9119-6"})(x(),e.Colors.TextError,C)},58651:function(a,b,c){c.d(b,{Z:function(){return x}});var d=c(67294),e=c(34551),f=c(26042),g=c(85893),h=c(10071),i=c(949),j=c(11890),k=c(31280),l=c(23685),m=c(3532),n=c(92114),o=function(a){var b=a.isEnabled,c=void 0!==b&&b,e=a.inputFieldId,f=a.suggestionsContainerRef,g=a.queryCalled,h=void 0!==g&&g,i=(0,d.useState)(!c),j=i[0],k=i[1];return(0,d.useEffect)(function(){if(c&&e){var a=function(a){var b;(null==f?void 0:null===(b=f.current)||void 0===b?void 0:b.contains(a.relatedTarget))||k(!1)},b=function(a){var b,c=a.target;(null==c?void 0:null===(b=c.value)||void 0===b?void 0:b.length)||k(!0)},d=document.getElementById(e);return null==d||d.addEventListener("focus",b),null==d||d.addEventListener("blur",a),function(){null==d||d.removeEventListener("focus",b),null==d||d.removeEventListener("blur",a)}}return c&&!e&&console.error("GeolocationSuggestions component won't work as expected. We need to provide `inputFieldId` prop if `showSuggestionOnInputFocus` is disabled"),function(){}},[]),(0,d.useEffect)(function(){if(c&&h&&j){var a=document.getElementById(e);null==a||a.focus()}},[h,e,c,j]),{showUI:j}},p=function(a){var b=a.loading,c=a.onClick,d=a.hideGetLocationButton;return(0,g.jsxs)(i.jn,{disablePadding:!0,hover:!0,children:[!d&&(0,g.jsxs)(i.Ek,{onClick:c,"data-testid":"geo-location-address-suggestions-button",children:[(0,g.jsx)(h.Icon,{type:h.Icon.Types.LocationPinEnabledFill,size:h.Icon.Sizes.Medium}),l.default.t("address_suggestion_use_current_location")]}),b&&(0,g.jsx)(i.rb,{addRightMargin:!0,children:(0,g.jsx)(j.default,{size:j.default.Sizes.Small,"data-testid":"geo-location-address-suggestions-loading-indicator"})})]})},q=function(a){var b=a.address,c=a.onSelect;return(0,g.jsx)(i.jn,{hover:!0,onClick:function(){(0,m.ZP)("cx_geo_location_address_suggestion_address_click",{address:b}),c(b)},children:(0,g.jsx)(i.ct,{children:(0,g.jsx)(k.ZP,{iconStart:{isInteractive:!1,type:h.Icon.Types.LocationPointerFill,size:h.Icon.Sizes.Medium},title:b.street,subtext:"".concat(b.city,", ").concat(b.state," ").concat(b.zipCode),size:k.ZP.Sizes.Small,insetSize:k.ZP.InsetSizes.ModalActionButtonsInline,isSeparatorVisible:!1,isToggled:!1,isSquished:!0,titleOverrides:{className:"geo-location-address-list-cell-title"}})})})},r=function(){return(0,g.jsx)(i.jn,{clickAble:!1,onMouseDown:function(a){return a.preventDefault()},"data-testid":"geo_location_address_suggestions_error_message",children:(0,g.jsxs)(i.Y3,{children:[(0,g.jsx)(h.Icon,{type:h.Icon.Types.ErrorFill,color:h.Icon.Colors.TextError}),l.default.t("address_suggestion_error_message")]})})},s=function(a){var b=a.loading;return(0,g.jsxs)(i.jn,{clickAble:!1,onMouseDown:function(a){return a.preventDefault()},sticky:!0,isTitle:!0,children:[l.default.t("address_suggestion_nearby_addresses"),void 0!==b&&b&&(0,g.jsx)(i.rb,{children:(0,g.jsx)(j.default,{size:j.default.Sizes.Small})})]})},t=d.memo(function(a){var b=a.onAddressSelect,c=void 0===b?function(){}:b,f=a.addressPickerInputId,h=a.isAddressPickerInputEmpty,j=a.renderItemAfterContent,k=a.enableHoverOnItemAfterContent,l=a.hideGetLocationButton,n=(0,e.f)(),t=n.showGetCurrentLocationButton,u=n.showNearByTitleWithLoading,v=n.isLoading,w=n.showSuggestionsList,x=n.showErrorMessage,y=n.addressSuggestions,z=n.shouldRenderAddressSuggestions,A=n.isStaticPosition,B=n.showBoxShadow,C=n.showSuggestionOnInputFocus,D=n.fetchGeoLocationAddresses,E=n.queryCalled,F=function(){D(),(0,m.ZP)("cx_geo_location_address_suggestion_get_current_location_button_click")},G=d.useRef(null),H=o({isEnabled:C,inputFieldId:void 0===f?null:f,suggestionsContainerRef:G,queryCalled:E}),I=H.showUI;return z&&I&&(void 0===h||h)?(0,g.jsxs)(i.N,{isLabelHidden:!0,shouldFlipResults:!1,isStaticPositionSuggestions:A,showBoxShadow:B,"data-testid":"geo-location-address-suggestions-container",ref:G,tabIndex:-1,isNewDesignEnabled:!1,children:[t&&(0,g.jsx)(p,{onClick:F,loading:v,hideGetLocationButton:void 0!==l&&l}),u&&(0,g.jsx)(s,{loading:v}),x&&(0,g.jsx)(r,{}),w&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(s,{}),y.map(function(a){return(0,g.jsx)(q,{address:a,onSelect:function(){return c(a)}},a.printableAddress)})]}),j&&(0,g.jsx)(i.jn,{hover:void 0!==k&&k,children:j})]}):null});t.displayName="GeoLocationAddressSuggestions";var u=function(a){return(0,e.f)().isEnabled?(0,g.jsx)(n.Z,{children:(0,g.jsx)(t,(0,f.Z)({},a))}):null};u.displayName="GeoLocationAddressSuggestionsContainer";var v=d.memo(u),w=function(){return null};w.Provider=e.e,w.List=v;var x=w},98571:function(a,b,c){var d=c(85893),e=c(1968),f=c(67294),g=c(78426),h=c(94526),i=c(23685),j=c(3532),k=function(a){var b=a.setShowSignInSignUpModal,c=a.onClose,k=a.showSignUpView,l=void 0!==k&&k,m=(0,h.m)().useGuidedLayout,n=(0,f.useState)(!0),o=n[0],p=n[1],q=(0,f.useCallback)(function(){p(!1)},[p]),r=(0,f.useCallback)(function(){(0,j.ZP)("signin_modal_closed"),b(!1),c()},[b,c]);return((0,f.useEffect)(function(){!o&&m&&r()},[o,m,r]),m)?o?(0,d.jsx)(e.Modal,{shouldCloseOnEscapePress:!0,shouldCloseOnOverlayClick:!0,hasContentPadding:!1,hasHeaderPadding:!1,hasCloseButton:!1,shouldRenderStickyHeader:!1,onClose:q,children:(0,d.jsx)(g.default,{navigateToSignUp:l,closeGuidedModal:q,entry:g.Entry.MODAL})}):null:(0,d.jsx)(e.Modal,{hasContentPadding:!1,hasHeaderPadding:!0,hasCloseButton:!0,onClose:r,title:i.default.t("layoutStrings_header_signin_signup"),children:(0,d.jsx)(g.default,{navigateToSignUp:l,entry:g.Entry.MODAL})})};b.Z=k},70179:function(a,b,c){var d=c(10253),e=c(70573),f=c(67294),g=c(47715),h=["www.doordashtest.com"],i=function(){var a=(0,e.useDVSBoolean)(g.PR.showLoginInModal,!1),b=(0,d.Z)(f.useState(!1),2),c=b[0],i=b[1],j=(0,d.Z)(f.useState(!1),2),k=j[0],l=j[1],m=function(){return i(!1)};return h.includes(window.location.host)?{showLoginInModalExpEnabled:!1,showSignInSignUpModal:!1,setShowSignInSignUpModal:i,showSignUpView:k,setShowSignUpView:l,hideSignInSignUpModal:m}:{showLoginInModalExpEnabled:a,showSignInSignUpModal:c,setShowSignInSignUpModal:i,showSignUpView:k,setShowSignUpView:l,hideSignInSignUpModal:m}};b.Z=i},92114:function(a,b,c){var d=c(67294),e=function(a){var b=a.children,c=(0,d.useState)(!1),e=c[0],f=c[1];return((0,d.useEffect)(function(){f(!0)},[]),e)?b:null};b.Z=e},94526:function(a,b,c){c.d(b,{m:function(){return f}});var d=c(70573),e=c(47715),f=function(){return{useGuidedLayout:"treatment"===(0,d.useDVSString)(e.PR.guidedWebLookupLogin,"control")}}},98893:function(a,b,c){c.d(b,{m:function(){return d},T:function(){return C}});var d,e=c(47568),f=c(26042),g=c(69396),h=c(34051),i=c.n(h),j=c(67294),k=c(99534),l=c(10253),m=c(7297),n=c(44119),o=c.n(n),p=c(93999);function q(){var a=(0,m.Z)(["\n  query getAddressByPoint($lat: Float!, $lng: Float!) {\n    getAddressByPoint(lat: $lat, lng: $lng) {\n      addressesList {\n        city\n        street\n        city\n        zipCode\n        state\n        countryShortname\n        printableAddress\n        lat\n        lng\n        id\n      }\n    }\n  }\n"]);return q=function(){return a},a}var r,s=o()(q()),t=function(){var a,b,c=(0,l.Z)((0,p.useLazyQuery)(s,{fetchPolicy:"network-only",errorPolicy:"all"}),2),d=c[0],e=c[1],g=e.loading,h=e.error,i=e.data,m=e.called,n=j.useMemo(function(){var a,b;return(null==i?void 0:null===(a=i.getAddressByPoint)||void 0===a?void 0:null===(b=a.addressesList)||void 0===b?void 0:b.filter(function(a){return a.city&&a.street&&a.zipCode}).map(function(a){var b=a.id,c=(0,k.Z)(a,["id"]);return(0,f.Z)({},c,{googlePlaceId:b,shortname:a.street})}))||[]},[null==i?void 0:null===(a=i.getAddressByPoint)||void 0===a?void 0:a.addressesList]);return{getAddressQuery:d,loading:g,called:m,error:h||(null==i?void 0:null===(b=i.getAddressByPoint)||void 0===b?void 0:b.addressesList)===null,data:n}},u=c(44221),v=c(3532),w=c(87620),x=c(89261),y="dd-geo-location-user-addresses",z=function(a){var b=a.fetchedAddressList,c=void 0===b?[]:b,d=a.isEnabled,e=void 0===d||d,f=a.storageTtlInHour,g=void 0===f?4:f,h=(0,j.useState)([]),i=h[0],k=h[1],l=(0,j.useState)([]),m=l[0],n=l[1];return(0,j.useEffect)(function(){var a,b=x.N1.get(y)||{},c=b.timeCreated,d=b.addressList;Date.now()<c+36e5*(a=g)?n(d):(x.N1.delete(y),n([]))},[]),(0,j.useEffect)(function(){e&&(m.length&&!c.length?k(m):c.length&&(x.N1.set(y,{timeCreated:Date.now(),addressList:c}),k(c)))},[c.length,e,m.length]),{addressExistsOnSessionStorage:!!m.length,addressList:i}},A=function(){var a=(0,j.useState)(!0),b=a[0],c=a[1];return(0,j.useEffect)(function(){c(!1)},[]),b};(r=d||(d={})).PROMPT="prompt",r.GRANTED="granted",r.DENIED="denied";var B={state:null,GRANTED:d.GRANTED,PROMPT:d.PROMPT,DENIED:d.DENIED},C=function(){var a,b,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=c.useSessionStorage,k=(0,j.useState)(null),l=k[0],m=k[1],n=t(),o=n.getAddressQuery,p=n.loading,q=n.data,r=n.error,s=n.called,x=z({fetchedAddressList:q,isEnabled:(void 0===h||h)&&l===d.GRANTED}),y=x.addressExistsOnSessionStorage,C=x.addressList,D=A(),E=(0,u.Z)({usePermissionsApi:!1,isServerSide:D}),F=E.error,G=E.updateCurrentPosition,H=E.loading,I=E.position,J=E.grantedGeolocationPermission,K=E.hasAskedForGeolocationPermission;(0,w.ZP)(function(){(null==C?void 0:C.length)&&(0,v.ZP)("cx_use_geo_location_address_suggestions_fetch_success",{addressList:C})},[C]),(0,j.useEffect)(function(){var a;null==navigator||null===(a=navigator.permissions)||void 0===a||a.query({name:"geolocation"}).then(function(a){l===d.PROMPT&&a.state===d.GRANTED?(0,v.ZP)("cx_use_geo_location_address_permission_granted"):l===d.PROMPT&&a.state===d.DENIED&&(0,v.ZP)("cx_use_geo_location_address_permission_denied"),m(a.state),a.onchange=function(){m(a.state)}})},[F,null==I?void 0:null===(a=I.coords)||void 0===a?void 0:a.latitude,null==I?void 0:null===(b=I.coords)||void 0===b?void 0:b.longitude]),(0,j.useEffect)(function(){navigator.permissions||(K&&!J?m(d.DENIED):K&&J?m(d.GRANTED):m(d.PROMPT))},[K,J]);var L=(0,j.useCallback)((0,e.Z)(i().mark(function a(){var b,c,d;return i().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(!F&&!H)){a.next=13;break}return a.prev=1,a.next=5,G();case 5:o({variables:{lat:(null==(d=a.sent)?void 0:null===(b=d.coords)||void 0===b?void 0:b.latitude)||0,lng:(null==d?void 0:null===(c=d.coords)||void 0===c?void 0:c.longitude)||0}}),(null==navigator?void 0:navigator.permissions)||K||J||(0,v.ZP)("cx_use_geo_location_address_permission_granted"),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(1),(null===a.t0||void 0===a.t0?void 0:a.t0.code)===(null===a.t0||void 0===a.t0?void 0:a.t0.PERMISSION_DENIED)?(null==navigator?void 0:navigator.permissions)||(0,v.ZP)("cx_use_geo_location_address_permission_denied"):r?(0,v.ZP)("cx_use_geo_location_address_suggestions_fetch_error",{error:r}):(0,v.ZP)("cx_use_geo_location_address_permission_error",a.t0);case 13:case"end":return a.stop()}},a,null,[[1,10]])})),[]);return{addressList:C.length?C:[],fetchGeoLocationAddresses:L,geoLocationPermission:(0,g.Z)((0,f.Z)({},B),{state:l}),loading:H||p,geoError:!!F,addressFetchError:!!r,queryCalled:s,addressExistsOnSessionStorage:y}}},54135:function(a,b,c){c.d(b,{Yq:function(){return d},bG:function(){return v},bo:function(){return w}});var d,e,f=c(10253),g=c(85893),h=c(24906),i=c(67294),j=c(55186),k=c(26880),l=c(7634),m=c(10071),n=c(96590),o=c(3532),p=c(77910),q=c(90103),r=c(53698),s=c(81156),t=c(70179),u=c(98571);(e=d||(d={})).SEO="seo",e.PICKUP="pickup",e.APP="app",e.STORE="store";var v=function(a){return(0,o.ZP)("action_nav_signin_signup_".concat(a))},w=function(a){var b=a.className,c=a.isWide,d=a.isGuest,e=a.redirectToHome,w=void 0!==e&&e,x=a.customRedirectUrl,y=a.entry,z=(0,r.Z)(),A=z.isDoorDash,B=z.isCaviar,C=(0,f.Z)(i.useState([]),2),D=C[0],E=C[1],F=Boolean((A||B)&&c&&void 0!==d&&d&&D.length),G=(0,t.Z)(),H=G.showLoginInModalExpEnabled,I=G.showSignInSignUpModal,J=G.setShowSignInSignUpModal,K=G.showSignUpView,L=G.setShowSignUpView,M=(0,s.Z)();(0,p.LI)(function(){return E([(0,k.Zd)({redirectBackAfterLogIn:!w,nextPath:x,enableLastSocial:M}),(0,k.Zd)({redirectBackAfterLogIn:!w,nextPath:x,navigateToSignUp:!0,enableLastSocial:M}),])},[]);var N=function(a,b){H&&((0,o.ZP)("signin_modal_opened"),b?(0,o.ZP)("signin_modal_signup_view"):(0,o.ZP)("signin_modal_signin_view"),a.preventDefault(),L(b),J(!0)),v(y)};return F?(0,g.jsxs)(n.mf,{"data-testid":j.m.signinSignupButton,className:b,isCaviar:B,children:[I&&(0,g.jsx)(u.Z,{setShowSignInSignUpModal:J,onClose:function(){return J(!1)},showSignUpView:K}),(0,g.jsx)(l.ZP,{isInline:!0,type:h.default.Types.FlatSecondary,size:h.default.Sizes.Medium,href:D[0],onClick:function(a){return N(a,!1)},children:(0,g.jsx)(m.Text,{styles:m.Text.Styles.Bold14,children:q.Z.signIn()})}),(0,g.jsx)(l.ZP,{isInline:!0,type:B?h.default.Types.FlatSecondary:h.default.Types.Primary,size:h.default.Sizes.Medium,href:D[1],onClick:function(a){return N(a,!0)},children:(0,g.jsx)(m.Text,{styles:m.Text.Styles.Bold14,color:B?m.Text.Colors.TextAction:void 0,children:q.Z.signUp()})})]}):null}},52204:function(a,b,c){c.d(b,{"_":function(){return d}});var d={home:"/",homeAlias:"/home/",business:"/business/",browse:"/browse/",collection:"/collection",guestLogIn:"/consumer/guest/",searchStore:"/search/store/:query/",searchItem:"/search/item/:query/",store:"/store/:id/",filters:"/filters/",categories:"/categories/:id/",deals:"/deals/:id/",apply:"/apply/",qrCode:"/qr-code/",passwordReset:"/password-reset/",dashpass:"/dashpass/",students:"/dashpass/student/",studentVerification:"/dashpass/student/verification/",masterCardPromo:"/mastercard/",chaseDashpass:"/dashpass-v2/chase/:id/",rbcDashPass:"/dashpass-v2/rbc/:id",masterCard:"/dashpass-v2/mastercard/",afterpayDashpass:"/dashpass-v2/afterpay/",summerOfDashPass:"/sodp/",manageSubscription:"/manage-subscription/",manageSubscriptionComingFromChase:"/manage-subscription/?showChase=true",pickup:"/pickup/",giftCards:"/gift-cards/",giftCardRedeem:"/consumer/gift-cards/",catering:"/catering/",menu:"/store/:slugId/:menuId?/",menuPostCheckout:"/store/:slugId/edit-order/:editId/",itemPage:"/store/:slugId/item/:itemId?/",legacyMenu:"/store/:slugId/menu/:menuId/",checkout:"/consumer/checkout/",profile:"/consumer/edit_profile/",referralInvite:"/consumer/invite/",referralSentList:"/consumer/invite/sent/",orders:"/orders/",credits:"/consumer/credits/",payment:"/consumer/payment/",convenience:"/convenience/",postLogin:"/post-login/",postLogout:"/post-logout/",androidrules:"/androidrules/",listicle:"/listicle/:uuid/",grocery:"/grocery-delivery"}}}])